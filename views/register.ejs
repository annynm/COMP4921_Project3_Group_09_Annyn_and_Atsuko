<!DOCTYPE html>
<html>
<head>
  <%- include('partials/head', { title: title }) %>
  <!-- Font Awesome for icons (optional, remove if not needed) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <%- include('partials/header') %>

  <main class="container section">
    <div class="columns is-centered">
      <div class="column is-6-tablet is-5-desktop is-4-widescreen">
        <div class="box">
          <h1 class="title has-text-centered">Create Your Account</h1>
          
          <!-- Error Message -->
          <% if (error) { %>
            <div class="notification is-danger is-light">
              <button class="delete"></button>
              <%= error %>
            </div>
          <% } %>
          
          <!-- Password Requirements -->
          <div class="notification is-info is-light is-size-7">
            <p class="has-text-weight-semibold mb-2">Password Requirements:</p>
            <ul>
              <li>At least 10 characters long</li>
              <li>One uppercase letter (A-Z)</li>
              <li>One lowercase letter (a-z)</li>
              <li>One number (0-9)</li>
              <li>One special character (@ $ ! % * ? &)</li>
            </ul>
          </div>

          <form method="POST" action="/register" novalidate>
            <!-- Username -->
            <div class="field">
              <label class="label" for="username">Username</label>
              <div class="control has-icons-left">
                <input 
                  class="input" 
                  type="text" 
                  id="username" 
                  name="username" 
                  placeholder="Choose a username"
                  value="<%= locals.formData?.username || '' %>"
                  required
                  minlength="3"
                  maxlength="30"
                >
                <span class="icon is-small is-left">
                  <i class="fas fa-user"></i>
                </span>
              </div>
            </div>

            <!-- Email -->
            <div class="field">
              <label class="label" for="email">Email Address</label>
              <div class="control has-icons-left">
                <input 
                  class="input" 
                  type="email" 
                  id="email" 
                  name="email" 
                  placeholder="Enter your email"
                  value="<%= locals.formData?.email || '' %>"
                  required
                >
                <span class="icon is-small is-left">
                  <i class="fas fa-envelope"></i>
                </span>
              </div>
            </div>

            <!-- First Name -->
            <div class="field">
              <label class="label" for="fname">First Name</label>
              <div class="control">
                <input 
                  class="input" 
                  type="text" 
                  id="fname" 
                  name="fname" 
                  placeholder="Your first name"
                  value="<%= locals.formData?.fname || '' %>"
                  required
                >
              </div>
            </div>

            <!-- Last Name -->
            <div class="field">
              <label class="label" for="lname">Last Name</label>
              <div class="control">
                <input 
                  class="input" 
                  type="text" 
                  id="lname" 
                  name="lname" 
                  placeholder="Your last name"
                  value="<%= locals.formData?.lname || '' %>"
                  required
                >
              </div>
            </div>

            <!-- Password -->
            <div class="field">
              <label class="label" for="password">Password</label>
              <div class="control has-icons-left">
                <input 
                  class="input" 
                  type="password" 
                  id="password" 
                  name="password" 
                  placeholder="••••••••••••"
                  required
                >
                <span class="icon is-small is-left">
                  <i class="fas fa-lock"></i>
                </span>
              </div>
            </div>

            <!-- Confirm Password -->
            <div class="field">
              <label class="label" for="confirm_password">Confirm Password</label>
              <div class="control has-icons-left">
                <input 
                  class="input" 
                  type="password" 
                  id="confirm_password" 
                  name="confirm_password" 
                  placeholder="••••••••••••"
                  required
                >
                <span class="icon is-small is-left">
                  <i class="fas fa-lock"></i>
                </span>
              </div>
            </div>

            <!-- Submit Button -->
            <div class="field mt-5">
              <div class="control">
                <button class="button is-primary is-fullwidth is-medium" type="submit">
                  <strong>Register Account</strong>
                </button>
              </div>
            </div>
          </form>

          <div class="has-text-centered mt-4">
            <p class="is-size-7">
              Already have an account? 
              <a href="/login" class="has-text-weight-semibold">Log in</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <%- include('partials/footer') %>
  
  <script>
    // Close notification functionality for Bulma
    document.addEventListener('DOMContentLoaded', function() {
      const deleteButtons = document.querySelectorAll('.notification .delete');
      deleteButtons.forEach(button => {
        button.addEventListener('click', function() {
          this.parentElement.remove();
        });
      });
    });
  </script>
</body>
</html>
